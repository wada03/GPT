# 2D Platformer - Codex用仕様書

このプロジェクトは、OpenAI Codexを用いて `pygame` 製 2D Platformer ゲームのコード自動生成を行う実験です。対象は小学生高学年の授業用であり、教育的・構造的にわかりやすいコードを目指します。

## 🌟 目的

* 授業教材向けの実装例をCodexで生成する
* 複数パターンを出力させて比較・評価する
* 最小限の構成でも動作することを優先する

## 📁 使用ファイル

以下のファイルを前提としてコードを生成する：

* `rules.md`：授業用のコーディングルール（構造や命名規則）
* `template.py`：骨組みとなるメインループ構造テンプレート
* `settings.py`：画面サイズや色などの定数定義

## 🧱 実装すべき構成

Codexは以下の構成を `main.py` として出力すること：

* `Player` クラス

  * 左右移動（`key.get_pressed()`による継続入力）
  * ジャンプ（イベント入力）
  * 重力・加速度
  * 足場との衝突判定

* `Platform` クラス

  * 静的な足場（複数個配置）

* `Goal` クラス（任意）

  * ゴール処理（プレイヤーとの接触判定）

* スプライトグループの構成と管理

  * `all_sprites`（必須）
  * `players`, `platforms`, `goals`（必要に応じて）

* 入力処理とイベントハンドリング

  * ジャンプなどのイベントは `event.get()` 内で処理
  * 移動などの継続操作は `get_pressed()` によりクラス内部で処理

* 衝突・状態遷移などの処理

  * `spritecollide()` による接触判定
  * ゴール処理（クリア判定）

## 💑 提案される3つの構成パターン

本教材では、以下のような **3つのパターン（選択肢）** を提示する。これらは段階的な発展ではなく、**独立した提案**である。

* `main_v1.py`: プレイヤーと足場のみの最小構成
* `main_v2.py`: ゴールオブジェクトによるクリア条件の導入パターン
* `main_v3.py`: 動く足場＋ジャンプ回数UIを含む応用パターン

> これら3案を比較し、最適な構成を選ぶことが本教材の目的である。

## 💑 テンプレート構造について

テンプレートファイル `template.py` は以下のようなプレースホルダを含みます。Codexはこの構造を維持し、必要な処理を対応箇所に実装してください。

* `{SPRITE_GROUPS}`：platforms, goals などのスプライトグループの初期化と追加
* `{EVENT_ACTIONS}`：ジャンプなど、イベント入力によるアクション処理
* `{COLLISIONS}`：当たり判定やゴール処理など
* `{GAME_ACTIONS}`：状態遷移、スコア処理など
* `{UI_DRAW}`：UIや追加情報の描画処理
* `{BG}`：背景色（例：WHITE）を埋め込む場所

## 📜 出力ログの保存先

Codexによって出力されたコードの比較・評価結果は `README.md` に記録すること。内容は以下を含む：

* 出力日時
* 実装の構成と方針（簡単な説明）
* 採用・不採用の判断メモ
* 気づき・評価コメント

## ✅ 注意点

* 多少未完成でも動作する構成を優先（例：ゴール処理が未完成でも動く）
* 日本の小学生が見て理解しやすいように、簡潔で直感的な構文を使用すること
* `rules.md` に定められた授業用コーディングルールは必ず遵守すること

以上の仕様に基づき、Codexは `main.py` を生成してください。
